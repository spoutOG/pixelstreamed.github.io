(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9877],{4936:function(){var e={init:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];$("link[rel=alternate].xhr").each((function(){e.trackVisit($(this).attr("href"),t)}))},trackVisit:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.includes("/games/"),i="mobile"===appInfo.device,o=null;if(n){if(e.endsWith("/mobile.js"))o=sessionStorage.getItem("referrer");else if(e.endsWith("/fullscreen.js"))o=LocalStorageAccess.load("refstore_".concat(e))||sessionStorage.getItem("referrer");else if(o=document.referrer,sessionStorage.setItem("referrer",o),LocalStorageAccess.store("refstore_".concat(e.replace(/\.js$/,""),"/fullscreen.js"),o),i||!t)return console.log("on mobile or on an too small screen for this game"),void LocalStorageAccess.clearOldValues("refstore_")}else o=document.referrer;var r={screen_width:screen.width,screen_height:screen.height};if(o&&(r.referer=o),window.adsBlocked)return r.ad_blocker=1,void $.get(e,r);fetch("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",{method:"HEAD",redirect:"error"}).then((function(){$.get(e,r)})).catch((function(){r.ad_blocker=1,$.get(e,r)}))},trackThumbsDisplay:function(){var e=$("[data-thumbnail-id]"),t=$.map(e,(function(e){return $(e).data("thumbnail-id")}));e.length>0&&t.length>0&&$.post("/ctr/thumbnails_displayed",{"thumbnail_ids[]":t},(function(t){e.each((function(){var e=$(this).data("thumbnail-id");$(this).find("a").on("click",(function(n){n.preventDefault(),window.location.href="/ctr/click_on_game?"+$.param({location:$(this).attr("href"),thumbnail_id:e,hash:t})}))}))})).fail((function(e,t,n){console.debug("CTRTracking",t,e.status)}))},trackTog:function(){var t=$("#item-container").data("item-tog-path");t&&(window.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e.sendTogRequest(t)})),window.addEventListener("pagehide",(function(){e.sendTogRequest(t)})))},trackingIdPresent:function(){return"undefined"!=typeof trackingId&&!!trackingId},sendTogRequest:function(t){if(e.trackingIdPresent()&&"sendBeacon"in navigator){var n=new FormData;n.append("tracking_id",trackingId),"undefined"!==typeof togUID&&togUID&&n.append("uid",togUID),navigator.sendBeacon(t,n)}}};window.Tracking=e},4521:function(){function e(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,t(o.key),o)}}function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}!function(t,n){function i(){n(".navigator").hide()}function o(){n("#items_container .infinite-scroll-loading").remove()}function r(e){var t=new RegExp("[?&]".concat(e,"=([^&#]*)"),"i").exec(window.location.href);return t?t[1]:null}function s(){var e=this.$container.find(".item"),t=this.seen;e.each((function(){var e=n(this).data("item-id");t[e]=!0}))}function a(){this.$container.find(".item:visible").length<40&&!window.UserAgent.device.type&&u.call(this)}function c(e){var t=n(e).find(".item.thumb");o(),t.length<=0?(this.maxPage=this.currentPage,n("footer").show()):(this.appendContent(t),this.showSmoothThumbs(t),this.processing=!1,l.call(this))}function u(){var e=this;return!this.processing&&(!(this.maxPage<=this.currentPage)&&(this.processing=!0,this.currentPage+=1,n("#items_container").append('      <div class="item thumb grid-column infinite-scroll-loading">        <div class="item__thumbarea"></div>        <div class="item__infos">Loading, please wait</div>      </div>    '),void n.ajax({url:this.baseUrl,timeout:1e4,data:{order:this.currentOrder,page:this.currentPage},success:c.bind(this),error:function(t,n,i){o(),e.processing=!1,404!=t.status&&console.debug("InfiniteScrollingXHR",n,t.status)}})))}function l(){n(window).scrollTop()>n(document).height()-n(window).height()-250&&u.call(this)}var d=function(){return t=function e(t){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$container=n(t),this.baseUrl=this.$container.data("base-url"),this.seen={},this.currentPage=parseInt(r("page"))||1,this.currentOrder=r("order")||"popularity",this.maxPage=parseInt(this.$container.data("max-page")),this.processing=!1,isNaN(this.maxPage)&&(this.maxPage=50),i.call(this),s.call(this),a.call(this),n(window).on("scroll",(function(){l.call(o)})),l.call(this),this.showSmoothThumbs()},(o=[{key:"filterItems",value:function(e){var t=this.seen;return n(e).filter((function(){var e=n(this).data("item-id");return!t[e]&&(t[e]=!0,!0)}))}},{key:"showSmoothThumbs",value:function(e){(null==e?n(".items-grid img"):n(e).find("img")).each((function(){n(this).on("load",(function(){n(this).fadeIn("slow")})),this.complete&&n(this).trigger("load")}))}},{key:"appendContent",value:function(e){this.filterItems(e).appendTo(this.$container),window.lazyloadAll(),n(window).trigger("resize"),n(document).trigger("itemsListUpdated")}}])&&e(t.prototype,o),c&&e(t,c),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,o,c}();t.InfiniteScrolling=d}(window,jQuery)},5460:function(e,t,n){"use strict";n(4521);$.fn.infiniteScrolling=function(){return this.each((function(){new InfiniteScrolling(this)})),this},$((function(){var e=$('[data-infinite-scrolling="true"][data-base-url]');e.length&&(e.infiniteScrolling(),$("footer").hide())}))},5114:function(){function e(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,t(o.key),o)}}function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var n=function(){return t=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialized=!1},(n=[{key:"init",value:function(){if(1!=this.initialized&&(this.initialized=!0,0!=$("#q").length)){$("#items-search-form").on("submit",(function(e){return"mobile"==window.UserAgent.device.type&&$(this).append('<input type="hidden" name="mobile" value="true">'),!0})),"mobile"==window.UserAgent.device.type&&$(".mobile-search").css("display","block");var e=!1,t=$("#live-search-template").html();$("#q").autocomplete({minLength:3,select:function(e,t){t.item.name&&window.location.assign(itemUrl(t.item))},source:function(t,n){var i={q:t.term,kind:window.LiveSearch.kind()};$.getJSON("/search.json",i,(function(t,i,o){$("body").addClass("search-list"),$("ul.live-search-results").html(""),t.items.length>0?(e=!0,n(t.items)):(e=!1,n(t.featured))}))},response:function(t,n){!e&&n.content&&n.content.unshift({name:null})}}).data("ui-autocomplete")._renderItem=function(e,n){if(!n.name){var i=$("<div>").addClass("no-results").text("Nothing was found, how about those great full games:"),o=$("#q").val();return $("#q").data("initial-input",o),$("<li>").data("empty",null).append(i).appendTo(e)}n.path=window.LiveSearch.itemUrl(n);var r=$(Handlebars.compile(t)(n)),s=e;return $(".live-search-results").length&&((s=$(".live-search-results")).trigger("liveSearchResultsRendered"),s.show()),r.appendTo(s)}}}},{key:"kind",value:function(){return $("#kind").length?$("#kind").val():"game"}},{key:"kindForUrl",value:function(e){return"game"==e&&(e+="s"),e}},{key:"itemUrl",value:function(e){return"/"+window.LiveSearch.kindForUrl(e.kind)+"/"+e.slug}}])&&e(t.prototype,n),i&&e(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,i}();window.LiveSearch=new n,document.addEventListener("DOMContentLoaded",(function(){$("#q").on("focus blur",(function(){window.LiveSearch.init(),$(document).trigger("checkOverlayMenus")}))}))},4463:function(e,t){"use strict";var n={init:function(){var e=this;$(document).ready((function(){e.handleClick(),$("#locale-selector-dropdown .locales-container .locale-link."+window.appInfo.currentLocale).addClass("selected"),$(".custom-modal .modal-item__link."+window.appInfo.currentLocale).addClass("selected"),$(".locale-link").on("click",(function(){Cookies.set("_y8_lang",$(this).data("locale"),$.extend(appInfo.commonCookieOptions,{expires:999}));var e=$(this).closest("#locale-selector-dropdown");if(e.length){e.find(".locale-chooser").html($(this).html());var t=document.location.pathname+document.location.search;this.href=this.href.replace(/((https?:\/\/)?[^\/]+).*/,"$1"+t),$(document).trigger("checkOverlayMenus")}})),$(".languages-selector a").on("click",(function(){Cookies.set("_y8_lang",$(this).data("locale"),$.extend(appInfo.commonCookieOptions,{expires:999}));var e=$(this).closest(".sidebar-item--lang");if(e.length){e.find(".sidebar-item__link--chooser").html($(this).html());var t=document.location.pathname+document.location.search;this.href=this.href.replace(/((https?:\/\/)?[^\/]+).*/,"$1"+t)}}))})),$(document).on("topMenu.forceClose",this.close)},open:function(){$("#locale-selector-dropdown .locales-container").fadeToggle(200)},close:function(){$("#locale-selector-dropdown .locales-container").fadeOut(200)},handleClick:function(){$("#locale-selector-dropdown .locale-chooser").not(".js-top-menu").on("click",(function(e){$("#locale-selector-dropdown .locales-container").toggle(),$(document).trigger("checkOverlayMenus"),e.preventDefault(),e.stopPropagation()}))}};t.A=n},7656:function(){"use strict";var e=new function(){var e={appId:null,init:function(){if(e.appId=$("body").data("idnet-app-id"),Cookies.get("logged_in")){if(e.appId)e.getPoints();else if(Cookies.get("user_pid")){var t=Cookies.get("idnet-bonus-score-value"),n=Cookies.get("idnet-bonus-score-last-update")>Date.now()-18e5;t&&n?e.updateUserInfo(Cookies.get("idnet-bonus-score-value")):e.getAllPoints(Cookies.get("user_pid"))}}else e.resetScoreWith(0)},getAllPoints:function(t){if(void 0==t)return!1;$.ajax({type:"GET",dataType:"jsonp",jsonpCallback:"cb",url:window.appInfo.accountServiceApiUrls.profilePointsTotalUrl.replace(":uid",t),error:function(e){logConnectionError(e,"in getPointsFromIdnet")},success:function(t){t&&t.points&&e.updateUserInfo(t.points)}})},getPoints:function(){$.ajax({type:"GET",url:window.appInfo.accountServiceApiUrls.userUrl,xhrFields:{withCredentials:!0},dataType:"json",data:{app_id:e.appId},success:function(t){t&&t.points&&t.points>0&&e.updateUserInfo(t.points),"logged_in"in t&&"keys"in t&&1==t.logged_in&&(-1===$.inArray("1_hour_of_play",t.keys)?-1===$.inArray("10_minutes_of_play",t.keys)?setTimeout((function(){e.savePoints("10_minutes_of_play")}),6e5):setTimeout((function(){e.savePoints("1_hour_of_play")}),36e5):-1===$.inArray("10_minutes_of_play",t.keys)&&setTimeout((function(){e.savePoints("10_minutes_of_play")}),6e5))}})},savePoints:function(t){$.ajax({type:"POST",url:window.appInfo.accountServiceApiUrls.pointsBonusTimerUrl,xhrFields:{withCredentials:!0},headers:{"X-Requested-With":"XMLHttpRequest"},dataType:"json",data:{app_id:e.appId,key:t},success:function(t){"success"in t&&"finished"in t&&1==t.success&&0==t.finished?(e.getAllPoints(),setTimeout((function(){e.savePoints("1_hour_of_play")}),3e6)):"success"in t&&1==t.success&&e.getAllPoints()}})},updateUserInfo:function(e){0==e||"0"==e?$(".js-user-idnet-points").html("0"):$(".js-user-idnet-points").html(e),Cookies.set("idnet-bonus-score-last-update",Date.now(),appInfo.commonCookieOptions),Cookies.set("idnet-bonus-score-value",e,appInfo.commonCookieOptions)},resetScoreWith:function(e){0==e||"0"==points?$(".js-user-idnet-points").html("0"):$(".js-user-idnet-points").html(e),Cookies.remove("idnet-bonus-score-last-update",appInfo.commonCookieOptions),Cookies.remove("idnet-bonus-score-value",appInfo.commonCookieOptions)}};return e},t=function(){function t(){this.MAX_HEARTED_ITEMS=window.appInfo.user.maxHeartedItems}return t.prototype.init=function(){if(this.registerHandlers(),!Cookies.get("logged_in"))return this.showUserInfo(!1),$(document).trigger("library-counters-ready",[this.getLibraryCounters()]),void $(document).trigger("user-info-ready");var e,t=$(".animations-active").length?"animations":"games";$.ajax({url:"/ajax/user",data:{kind:t},error:function(e){return logConnectionError(e,"in showLoginData")},success:(e=this,function(t){return e.showUserInfo(t),e.setCSRFTokenHeader(),$(document).triggerHandler("favorites-count",t.my_games_count),$(document).triggerHandler("hearts-count",t.hearts_count),$(document).trigger("library-counters-ready",[t]),$(document).trigger("user-info-ready",[t])})})},t.prototype.setCSRFTokenHeader=function(){return $.ajaxPrefilter((function(e,t,n){if(!e.crossDomain)return n.setRequestHeader("X-CSRF-Token",Cookies.get("gp-csrf-token"))}))},t.prototype.getLibraryCounters=function(){var e,t;$(".animations-active").length?(e=Cookies.get("watched_videos_ids"),t=Cookies.get("liked_videos_ids")):(e=Cookies.get("played_games_ids"),t=Cookies.get("liked_games_ids"));var n={visited_items:0,liked_items:0,recommended_items:0};return e&&(n.visited_items=JSON.parse(e).length,n.recommended_items=n.visited_items>15?200:14*n.visited_items),t&&(n.liked_items=JSON.parse(t).length),n},t.prototype.current_user_id=function(){return Cookies.get("user_id")},t.prototype.showEditButton=function(){var e;return e=$("#toggle-edit-"+this.current_user_id()),this.revealButton(e)},t.prototype.revealButton=function(e){return e.removeClass("hidden")},t.prototype.hideButton=function(e){return e.addClass("hidden")},t.prototype.isMyProfile=function(e){return e===Cookies.get("user_id")},t.prototype.isLoggedIn=function(){return Cookies.get("logged_in")},t.prototype.registerHandlers=function(){var e=this;return $(document).on("favorites-count",(function(t,n){e.setFavoritesCount(n)})),$(document).on("hearts-count",(function(t,n){e.setHeartsCount(n)})),$(document).on("user-logged-in",$.proxy(this.showEditButton,this))},t.prototype.showUserInfo=function(t){if(t&&null!=t&&!1!==t.logged_in){if($("#user_not_logged_in, .user_not_logged_in, .user-not-logged-in, .user-not-logged-in-new").hide(),$(".user_not_logged_in_comments").hide(),$("#profile_picture_box").attr("src",t.my_avatar),$(".profile_picture_box").attr("src",t.my_avatar),$("#username_box").html(t.username),$(".username_box").html(t.username),$(".js-favorites-count").html(t.my_games_count),null!=t.user_pid&&($(".js-favorites-link").attr("href","/users/"+t.user_pid+"/"+t.username),$(".js-edit-picture-link").attr("href","/users/"+t.user_pid+"/"+t.username),$(".header-email nobr").html(t.email)),null!=t.studio_slug){var n=$("#account-menu-link-see-my-studio"),i=n.attr("destination");i&&(n.attr("href",i.replace("my-studio-slug",t.studio_slug)),n.show(),$(".dropdown-item--divider-studio").css("display","block"))}$(".js-favorites-container").show(),$(".user-toggle").prepend("<img src='".concat(t.my_avatar,"' class='avatar' alt='avatar'>")),$("#user_logged_in, .user_logged_in, .user-logged-in, .user-logged-in-new, .header__search, .header__search-btn").show(),$("nav.navbar, .header").addClass("logged"),Cookies.set("user_id",t.user_id,window.appInfo.commonCookieOptions),Cookies.set("user_pid",t.user_pid,window.appInfo.commonCookieOptions),Cookies.set("access_token",t.access_token,window.appInfo.commonCookieOptions);var o=new CustomEvent("privacy_policy_validated",{detail:{privacy_policy_validated:t.privacy_policy_validated}});window.dispatchEvent(o),$(document).trigger("user-logged-in")}else $("#user_not_logged_in, .user_not_logged_in, .user-not-logged-in").css("display","inline-block"),$(".user-not-logged-in-new, .header__search, .header__search-btn").css("display","flex"),$(".user_not_logged_in_comments").show(),Cookies.remove("user_id"),Cookies.remove("access_token");return e.init()},t.prototype.setFavoritesCount=function(e){Cookies.set("favorites_count",e,window.appInfo.commonCookieOptions)},t.prototype.setHeartsCount=function(e){Cookies.set("hearts_count",e,window.appInfo.commonCookieOptions)},t.prototype.getFavoritesCount=function(){return Cookies.get("favorites_count")||0},t.prototype.getHeartsCount=function(){return Cookies.get("hearts_count")||0},t.prototype.canHeart=function(){return this.getHeartsCount()<this.MAX_HEARTED_ITEMS},t}();window.UserInfo=t}}]);