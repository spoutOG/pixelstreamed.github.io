(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9737],{9170:function(){$((function(){var e=$(".item-container");if(e.data("focus-object")&&$(".item-container object").trigger("focus"),e.data("focus-html5-content")){var t=$("#html5-content");t.trigger("focus"),$(document).on("click mouseenter",".item-container",(function(){t.trigger("focus")}))}String(document.location.pathname).match(/\/games\/\w+/)&&$(document).off("keydown mouseenter mouseleave")}))},9140:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,o(i.key),i)}}function o(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}n.d(t,{A:function(){return P}});var r=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=$("#unity_webgl_game_url").attr("href"),this.element=t},(t=[{key:"display",value:function(){this.element.setAttribute("src",this.element.getAttribute("data-src"))}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,u(i.key),i)}}function u(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function c(e,t,n){return t=l(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e),n=t,i&&a(n.prototype,i),o&&a(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,o}(r),v=d;n(3899);function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,m(i.key),i)}}function m(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var p=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.parent=this.element.closest(".item-container")},(t=[{key:"display",value:function(){var e=this,t=!1;flowplayer("#"+this.element.id,this.options()).on("load",(function(t,n){new Video("#"+e.element.id)})).on("resume",(function(n,i){t||($.post("/tracking/video_play_count",{item_slug:e.parent.getAttribute("data-slug")}),t=!0)})).on("finish",(function(e,t){t.unload(),$(document).trigger("playNextVideo")}))}},{key:"options",value:function(){var e={key:"$483119889963668,$118640622092553",hlsQualities:!0,autoplay:!1,hlsjs:{maxMaxBufferLength:10,startLevel:-1},clip:{sources:[{type:"application/x-mpegurl",src:this.element.getAttribute("data-src")}]}};return e}}])&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,b(i.key),i)}}function b(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var g=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"display",value:function(){if(-1===navigator.userAgent.indexOf("y8")){console.log("Loading Ruffle!");var e=document.createElement("script");e.src="https://unpkg.com/@ruffle-rs/ruffle",document.head.appendChild(e)}}}])&&y(e.prototype,t),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function w(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,j(i.key),i)}}function k(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function j(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var P=k((function e(t){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.itemLoaders={Html5Loader:r,UnityLoader:v,VideoLoader:p,SwfLoader:g},!t)throw new Error("No item loader is defined");var i=t.getAttribute("data-item-loader");if(!(i in this.itemLoaders))throw new Error("Unknown item loader: ".concat(i));var o=null!==(n=document.getElementById("item-direct-container"))&&void 0!==n?n:document.querySelector(".item-direct-container");return new this.itemLoaders[i](o)}))},3244:function(e,t){"use strict";function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,i(o.key),o)}}function i(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var o=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"init",value:function(){var e=this,t=!1,n=!1;this.active=!1,this.$promoBlock=["y8-browser-promo-game","promoted-mobile-game"],this.$promoBlock.forEach((function(i){var o=document.getElementById(i);document.body.contains(o)&&(n=!0,e.active=!0,o.classList.contains("y8-browser-promo-game--without-emulator")&&(t=!0))})),n&&(t&&!this.isY8Browser()||(this.active=!1,this.dispatchCustomEvent()),this.isY8Browser()?this.hide():(this.manageDirectDownload(),this.$promoBlock.forEach((function(t){var n=document.getElementById(t);document.body.contains(n)&&n.querySelector(".close-btn").addEventListener("click",(function(){e.hide()}))}))))}},{key:"isY8Browser",value:function(){return-1!==navigator.userAgent.indexOf("y8")}},{key:"hide",value:function(){this.$promoBlock.forEach((function(e){var t=document.getElementById(e);document.body.contains(t)&&(t.style.display="none")}))}},{key:"dispatchCustomEvent",value:function(){var e=new Event("BrowserPromoGameHidden");document.dispatchEvent(e)}},{key:"manageDirectDownload",value:function(){var e=window.navigator.appVersion;this.$downloadLink=document.querySelector(".download-link"),document.body.contains(this.$downloadLink)&&(/.*(Mac).*/i.test(e)?this.$downloadLink.href=this.$downloadLink.dataset.macosUrl:/.*(Win).*/i.test(e)&&(this.$downloadLink.href=this.$downloadLink.dataset.windowsUrl))}},{key:"isFlashEnabled",value:function(){var t=!1;if("undefined"!=typeof navigator.plugins&&"object"==typeof navigator.plugins["Shockwave Flash"])t=!0;else if("undefined"!=typeof window.ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(t=!0)}catch(e){console.log(e)}return t}}],t&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,i}();t.A=o},7189:function(e,t,n){"use strict";var i=n(9140);function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}function r(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var a=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"init",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.area=document.querySelector(".item-area"),this.element=null!==(t=document.getElementById("item-container"))&&void 0!==t?t:document.querySelector(".item-container"),this.skinShortName=null!==e&&void 0!==e?e:"y8",this.screenTooSmallWidth=768,"y8"==this.skinShortName&&(this.view=n)}},{key:"calculAvailableHeightForItem",value:function(){var e,t,n=null!==(e=document.querySelector(".navbar"))&&void 0!==e?e:document.querySelector("header"),i=null!==(t=n&&n.offsetHeight)&&void 0!==t?t:0;return window.innerHeight-i-20}},{key:"getDataAttribute",value:function(e){return this.element.getAttribute("data-item-".concat(e))}},{key:"itemWidth",value:function(){return parseInt(this.getDataAttribute("width"))}},{key:"itemHeight",value:function(){return parseInt(this.getDataAttribute("height"))}},{key:"isResponsive",value:function(){return"true"===this.getDataAttribute("supports-resizing").toLowerCase()}},{key:"enoughSpaceToBePlayed",value:function(){return"y8"!=this.skinShortName||"mobile"===this.view||"fullscreen"===this.view||(this.isResponsive()&&window.innerWidth<=this.screenTooSmallWidth?(console.log("desktop screen too small for this responsive game"),!1):!this.isResponsive()&&this.area.offsetWidth<this.itemWidth()?(console.log("game is fixed-size and screen width is too small"),!1):!(!this.isResponsive()&&this.calculAvailableHeightForItem()<this.itemHeight())||(console.log("game is fixed-size and screen height is too small"),!1))}},{key:"suggestFullScreen",value:function(){var e=document.getElementById("suggest-fullscreen");document.body.contains(e)&&(console.log("suggest to play fullscreen"),this.element.style.display="none",e.classList.add("show"))}},{key:"loadTheItem",value:function(){if(console.log("load the item"),$(".item-spot").replaceWith(this.element.getAttribute("async_content")),new i.A(this.element).display(),this.element.style.display="block",Tracking.trackTog(),-1!==navigator.userAgent.indexOf("y8")){var e=document.getElementById("item-direct-container");if(this.isResponsive()){e.style.width="100%";var t=this.itemWidth()/this.itemHeight();this.area.style.height=Math.round(e.offsetWidth/t)+"px"}else e.style.width=this.itemWidth(),e.style.height=this.itemHeight()}}},{key:"render",value:function(){this.enoughSpaceToBePlayed()?this.loadTheItem():this.suggestFullScreen()}}],t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();t.A=a},6115:function(e,t){"use strict";function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,i(o.key),o)}}function i(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var o=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"init",value:function(){var e=this;this.active=!1,this.$adsDivIDs=["request-play-game-ad"],this.$adsDivIDs.forEach((function(t){document.body.contains(document.getElementById(t))&&(e.active=!0)})),this.active?(console.log("PreRollAdsManager active"),window.addEventListener("message",(function(t){'"CompletedAD"'==JSON.stringify(t.data)&&e.hide()})),document.addEventListener("adDisplayDone",(function(t){e.hide()}))):(console.log("PreRollAdsManager NOT active"),this.dispatchCustomEvent())}},{key:"hide",value:function(){this.$adsDivIDs.forEach((function(e){var t=document.getElementById(e);document.body.contains(t)&&(t.style.display="none")})),this.dispatchCustomEvent()}},{key:"dispatchCustomEvent",value:function(){console.log("dispatching event preRollAdHidden"),event=new Event("preRollAdHidden"),document.dispatchEvent(event)}}])&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,i}();t.A=o},6641:function(){jQuery((function(e){var t,n="/tracking/outbound_link",i=Date.now(),o=!1,r=!1,a=0!==e("#item-container iframe").length,u=!a,c=!1;(t=0!==e("body[data-controller=Items][data-action=show]").length,c=0!==e("body[data-controller=Items][data-action=mobile]").length,"undefined"!==typeof document.hidden&&(t||c))&&(e("#item-container iframe, #item-container embed, #item-container object").on("hover",(function(){r=!0}),(function(){r=!1})),e("#item-container embed, #item-container object").on("mouseup",(function(){setTimeout((function(){if(!c&&u&&r&&document.hidden&&!o){var t=Date.now()-i;e.post(n,{tog:t}),o=!0}}),1e3)})),e(document).on("visibilitychange",(function(t){if(!c&&a&&r&&document.hidden){var o=Date.now()-i;e.post(n,{tog:o}),e(this).off(t)}})),window.addEventListener("pagehide",(function(){if(c&&"sendBeacon"in navigator){var e=new FormData;e.append("tog",Date.now()-i),navigator.sendBeacon(n,e)}})))}))},3899:function(){function e(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,t(o.key),o)}}function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var n=function(){return t=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$container=$(t),this.initialBottomPosition=this.$container.position().top+this.$container.outerHeight(!0),this.fakeContainerClassName="fake-container",this.fakeContainer=$("<div>").addClass(this.fakeContainerClassName),this.checkPosition(),this.onScroll()},(n=[{key:"checkPosition",value:function(){if($(window).scrollTop()>this.initialBottomPosition)return 0==$("."+this.fakeContainerClassName).length&&this.$container.before(this.fakeContainer),this.moveToRightCorner();1==$("."+this.fakeContainerClassName).length&&this.fakeContainer.remove(),this.moveToOriginalPosition()}},{key:"moveToRightCorner",value:function(){this.$container.addClass("player-right-corner")}},{key:"moveToOriginalPosition",value:function(){this.$container.removeClass("player-right-corner")}},{key:"onScroll",value:function(){var e=this,t=!1;$(window).on("scroll",(function(){t=!0})),setInterval((function(){t&&(t=!1,e.checkPosition())}),300)}}])&&e(t.prototype,n),i&&e(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,i}();window.Video=n},6590:function(e,t,n){"use strict";n(6641),n(9170);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,o(i.key),i)}}function o(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function r(e,t,n){return t=u(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,a()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n))}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(a=function(){return!!e})()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}var s=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=r(this,t)).adsSidebar=document.querySelector(".right"),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){this.removeAdsIfSmallScreen(),this.loadTheItem()}},{key:"removeAdsIfSmallScreen",value:function(){var e=document.body.offsetWidth-this.adsSidebar.offsetWidth-15;(!this.enoughSpaceToBePlayed()||e<this.element.offsetWidth||window.innerWidth<1250)&&this.adsSidebar.remove()}}])&&i(n.prototype,o),a&&i(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(n(7189).A),l=n(6115),f=n(3244);$((function(){Tracking.init(),(new f.A).init(),document.addEventListener("preRollAdHidden",(function(e){console.log("preRollAdHidden received (#3)");var t=new s;t.init(window.appInfo.skinShortName,"fullscreen"),t.render()})),(new l.A).init()}))}},function(e){var t;t=6590,e(e.s=t)}]);